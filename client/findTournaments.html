<!DOCTYPE html>
<html>
  <head>
    <title> Map view </title>
    <meta charset="utf-8">
    <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <link rel="stylesheet" href="styles/main.css">
    <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v0.51.0/mapbox-gl.css' rel='stylesheet' />
    <script src='https://api.tiles.mapbox.com/mapbox-gl-js/v0.51.0/mapbox-gl.js'></script>
    <script src='https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v2.3.0/mapbox-gl-geocoder.min.js'></script>
    <link rel='stylesheet' href='https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v2.3.0/mapbox-gl-geocoder.css' type='text/css' />
    <style>
	#map { position:absolute; position:fixed; top:0; bottom:0; width:50%; }
	div.container{position: absolute; top:70px; bottom: 0; right: 0; width:50%}
	.geocoder {
        	position:absolute;
		position:fixed;
        	z-index:1;
        	width:15%;
        	left:15%;
        	top:75px;
    	}
    	.mapboxgl-ctrl-geocoder { min-width:100%; }

        @media screen{
            .noPrint{}
            .noScreen{display:none;}
        }

        @media print{
            .noPrint{display:none;}
            .noScreen{}
        }

     </style>
  </head>
<body ng-app="directoryApp" style="padding-top: 70px">

 <nav class="navbar navbar-expand-lg navbar-light bg-light fixed-top">

        <a class="navbar-brand">

            <font color="orange">GT</font><font color="blue">ourney</font>

        </a>

        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav"

            aria-expanded="false" aria-label="Toggle navigation">

            <span class="navbar-toggler-icon"></span>

        </button>
      <div class="collapse navbar-collapse" id="navbarNav">

            <ul class="navbar-nav mr-auto">

                <li class="nav-item">

                    <a class="nav-link" href="/home">Home<span class="sr-only"></span></a>

                </li>

                <li class="nav-item active">

                    <a class="nav-link" ng-init="getLoggedInUser()" href="/map">Find Tournaments</a>

                </li>

                <li class="nav-item" ng-if="loggedInUser != undefined">

                    <a class="nav-link" href="/profile">Profile</a>

                </li>

                <li class="nav-item" ng-if="loggedInUser != undefined">

                    <a class="nav-link" href="/logout">Logout<span class="sr-only"></span></a>

                </li>

                <li class="nav-item" ng-if="loggedInUser == undefined">

                    <a class="nav-link" href="/login">Login<span class="sr-only"></span></a>

                </li>

                <li class="nav-item" ng-if="loggedInUser != undefined">

                    <a class="nav-link" href="/create">Create Event<span class="sr-only"></span></a>

                </li>

                <li class="nav-item" ng-if="loggedInUser != undefined">

                    <a class="nav-link" href="/admin" ng-if="loggedInUser.admin == true">Admin Page<span class="sr-only"></span></a>

                </li>

            </ul>

            <div align="right">

                <form class="form-inline my-2 my-lg-8" id="navSearchBar">

                    <input class="form-control mr-sm-2" type="search" placeholder="Search" aria-label="Search">

                    <button class="btn btn-outline-success my-2 my-sm-0" ng-click="search()" type="submit">Search</button>

                </form>

            </div>

        </div>

    </nav>


<div id='map'></div>
<div id='geocoder' class='geocoder'></div>
<script>
mapboxgl.accessToken = 'pk.eyJ1Ijoid2VpbGluMTIyMSIsImEiOiJjanAzZHF6bXMwMTMwM3hvaDU5bTI5YzFnIn0.Ry6afSeTiFttI_rY5F-kfw';

var map = new mapboxgl.Map({
    container: 'map',
    style: 'mapbox://styles/mapbox/streets-v9',
    center: [-82.325020, 29.651980],
    zoom: 12
});

var geocoder = new MapboxGeocoder({
    accessToken: mapboxgl.accessToken
});

document.getElementById('geocoder').appendChild(geocoder.onAdd(map));
map.on('load', function() {
    map.addSource('single-point', {
        "type": "geojson",
        "data": {
            "type": "FeatureCollection",
            "features": []
        }
    });

    map.addLayer({
        "id": "point",
        "source": "single-point",
        "type": "circle",
        "paint": {
            "circle-radius": 10,
            "circle-color": "#007cbf"
        }
    });

    geocoder.on('result', function(ev) {
        map.getSource('single-point').setData(ev.result.geometry);
    });
});
</script>
 <div class="container" ng-controller="TourneyController">

        <div class="card" ng-repeat="x in tourneys | orderBy: 'tournamentName':true" ng-click="getAddress(x)">

            <div class="card-body">

                <h5 class="Game">Game: {{x.game}}</h5>

                    <h5 class="Date">Date: {{displayDate(x)}}</h5>

                        <p class="Address">Adderss: {{x.address}}</p>

                            <p class="Details">Details: {{x.details}}</p>

															<p class="Fee">Fee: ${{x.fee}} || Age Requirement: {{x.ageReq}}</p>

            </div>

        </div>

    </div>

    <div class="noScreen"> <img src="https://chart.googleapis.com/chart?chs=150x150&cht=qr&chl=http://gtourney69.herokuapp.com/&choe=UTF-8" alt="QR Code" /> </div>

    <!-- Scripts I've added-->

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
    <!-- Scripts that were already there before minus redundancies -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
    <!-- What are these for? -->
    <script src="https://code.angularjs.org/1.4.3/angular.js"></script>
    <script src="https://code.angularjs.org/1.4.3/angular-cookies.js"></script>
    <script src="js/app.js"></script>
    <script src="js/factories/tourneyFactory.js"></script>
    <script src="js/controllers/tourneyController.js"></script>

  </body>
</html>
